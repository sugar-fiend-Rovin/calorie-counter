(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{137:function(e,t,a){},181:function(e,t){},227:function(e,t,a){e.exports=a(385)},232:function(e,t,a){},239:function(e,t,a){},242:function(e,t,a){},243:function(e,t,a){},246:function(e,t,a){},280:function(e,t){},385:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a(0),o=a.n(r),l=a(112),c=a.n(l),i=(a(232),a(102),a(94),a(35),a(239),a(177),a(34)),s=a(11);function u(){var e=Object(i.a)(["\n  query login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      username\n      email\n      token\n    }\n  }\n"]);return u=function(){return e},e}function m(){var e=Object(i.a)(["\n  mutation(\n    $username: String!\n    $email: String!\n    $password: String!\n    $confirmPassword: String!\n  ) {\n    register(\n      username: $username\n      email: $email\n      password: $password\n      confirmPassword: $confirmPassword\n    ) {\n      username\n      email\n    }\n  }\n"]);return m=function(){return e},e}function d(){var e=Object(i.a)(["\n  mutation($carbs: Float!, $fats: Float!, $protein: Float!, $kcal: Float!) {\n    updateUserGoals(\n      carbs: $carbs\n      fats: $fats\n      protein: $protein\n      kcal: $kcal\n    ) {\n      daily_calories\n      carbohydrates\n      proteins\n      fats\n    }\n  }\n"]);return d=function(){return e},e}function g(){var e=Object(i.a)(["\n  mutation($food_entry: String!, $date: String!) {\n    updateEntryMinus(food_entry: $food_entry, date: $date) {\n      food_entry\n      date\n      quantity\n    }\n  }\n"]);return g=function(){return e},e}function b(){var e=Object(i.a)(["\n  mutation($food_entry: String!, $date: String!) {\n    updateEntryPlus(food_entry: $food_entry, date: $date) {\n      food_entry\n      date\n      quantity\n    }\n  }\n"]);return b=function(){return e},e}function p(){var e=Object(i.a)(["\n  mutation($food_entry: String!, $date: String!) {\n    deleteEntry(food_entry: $food_entry, date: $date)\n  }\n"]);return p=function(){return e},e}function v(){var e=Object(i.a)(["\n  mutation($name: String!) {\n    addUser(username: $name) {\n      username\n    }\n  }\n"]);return v=function(){return e},e}function h(){var e=Object(i.a)(["\n  mutation($food_entry: String!, $date: String!, $quantity: Float!) {\n    createEntry(food_entry: $food_entry, date: $date, quantity: $quantity) {\n      food_entry\n      date\n      quantity\n    }\n  }\n"]);return h=function(){return e},e}function f(){var e=Object(i.a)(["\n  mutation(\n    $food_name: String!\n    $type: String!\n    $calories: Float!\n    $carbohydrates: Float!\n    $proteins: Float!\n    $fats: Float!\n  ) {\n    addFood(\n      food_name: $food_name\n      type: $type\n      calories: $calories\n      carbohydrates: $carbohydrates\n      proteins: $proteins\n      fats: $fats\n    ) {\n      food_name\n      type\n      calories\n      carbohydrates\n      proteins\n      fats\n    }\n  }\n"]);return f=function(){return e},e}function y(){var e=Object(i.a)(["\n  query {\n    getFoods {\n      food_name\n      type\n      calories\n      carbohydrates\n      proteins\n      fats\n    }\n  }\n"]);return y=function(){return e},e}function E(){var e=Object(i.a)(["\n  query($date: String!) {\n    getEntries(date: $date) {\n      username\n      food_entry\n      date\n      quantity\n      food_en {\n        food_name\n        type\n        calories\n        carbohydrates\n        proteins\n        fats\n      }\n    }\n  }\n"]);return E=function(){return e},e}function j(){var e=Object(i.a)(["\n  query {\n    getUser {\n      id\n      email\n      username\n      daily_calories\n      carbohydrates\n      proteins\n      fats\n    }\n  }\n"]);return j=function(){return e},e}function O(){var e=Object(i.a)(["\n  query($name: String!) {\n    getFood(food_name: $name) {\n      food_name\n      type\n      calories\n      carbohydrates\n      proteins\n      fats\n    }\n  }\n"]);return O=function(){return e},e}Object(s.gql)(O());var w=Object(s.gql)(j()),$=(Object(s.gql)(E()),Object(s.gql)(y()),Object(s.gql)(f()),Object(s.gql)(h()),Object(s.gql)(v()),Object(s.gql)(p()),Object(s.gql)(b()),Object(s.gql)(g()),Object(s.gql)(d())),x=Object(s.gql)(m()),C=Object(s.gql)(u()),L=a(13),S=(a(40),a(390)),k=a(204),q=a(388);a(57),a(58),a(242);a(137),a(243);var _=a(205),N=a.n(_),M=Object(r.createContext)(),F=Object(r.createContext)(),G=null,I=localStorage.getItem("token");if(I){var P=N()(I),T=new Date(1e3*P.exp);new Date>T?(localStorage.removeItem("token"),console.log("expired")):G=P}else console.log("No token found");var U=function(e,t){switch(t.type){case"LOGIN":return localStorage.setItem("token",t.payload.token),Object(n.a)(Object(n.a)({},e),{},{user:t.payload});case"LOGOUT":return localStorage.removeItem("token"),Object(n.a)(Object(n.a)({},e),{},{user:null});default:throw new Error("Unknown action type: ".concat(t.type))}},D=function(e){var t=e.children,a=Object(r.useReducer)(U,{user:G}),n=Object(L.a)(a,2),l=n[0],c=n[1];return o.a.createElement(F.Provider,{value:c},o.a.createElement(M.Provider,{value:l},t))},R=function(){return Object(r.useContext)(F)};var A=a(74),Q=(a(246),a(392)),B=(a(120),a(123));function H(e){var t,a,l=Object(r.useState)({username:"",password:""}),c=Object(L.a)(l,2),i=c[0],u=c[1],m=Object(r.useState)({}),d=Object(L.a)(m,2),g=d[0],b=d[1],p=R(),v=Object(s.useLazyQuery)(C,{onError:function(e){console.log(e),b(e.graphQLErrors[0].extensions.errors)},onCompleted:function(t){console.log(t),p({type:"LOGIN",payload:t.login}),e.history.push("/")}}),h=Object(L.a)(v,2),f=h[0],y=h[1].loading;return o.a.createElement(S.a,{className:"bg-white py-5 justify-content-center"},o.a.createElement(k.a,{sm:8,md:6,lg:4},o.a.createElement("h1",{className:"text-center"},"Login"),o.a.createElement(Q.a,{onSubmit:function(e){e.preventDefault(),f({variables:i})}},o.a.createElement(Q.a.Group,null,o.a.createElement(Q.a.Label,{className:g.username&&"text-danger"},null!==(t=g.username)&&void 0!==t?t:"Username"),o.a.createElement(Q.a.Control,{type:"text",value:i.username,className:g.username&&"is-invalid",onChange:function(e){return u(Object(n.a)(Object(n.a)({},i),{},{username:e.target.value}))}})),o.a.createElement(Q.a.Group,null,o.a.createElement(Q.a.Label,{className:g.password&&"text-danger"},null!==(a=g.password)&&void 0!==a?a:"Password"),o.a.createElement(Q.a.Control,{type:"password",value:i.password,className:g.password&&"is-invalid",onChange:function(e){return u(Object(n.a)(Object(n.a)({},i),{},{password:e.target.value}))}})),o.a.createElement("div",{className:"text-center"},o.a.createElement(q.a,{variant:"success",type:"submit",disabled:y},y?"loading..":"Login"),o.a.createElement("br",null),o.a.createElement("small",null,"Don't have an account? ",o.a.createElement(B.NavHashLink,{to:"/register"},"Register"))))))}a(181);function V(e){var t,a,l,c,i=Object(r.useState)({email:"",username:"",password:"",confirmPassword:""}),u=Object(L.a)(i,2),m=u[0],d=u[1],g=Object(r.useState)({}),b=Object(L.a)(g,2),p=b[0],v=b[1],h=Object(s.useMutation)(x,{update:function(t,a){return e.history.push("/login")},onError:function(e){return v(e.graphQLErrors[0].extensions.errors)}}),f=Object(L.a)(h,2),y=f[0],E=f[1].loading;return o.a.createElement(S.a,{className:"bg-white py-5 justify-content-center"},o.a.createElement(k.a,{sm:8,md:6,lg:4},o.a.createElement("h1",{className:"text-center"},"Register"),o.a.createElement(Q.a,{onSubmit:function(e){e.preventDefault(),y({variables:m})}},o.a.createElement(Q.a.Group,null,o.a.createElement(Q.a.Label,{className:p.email&&"text-danger"},null!==(t=p.email)&&void 0!==t?t:"Email address"),o.a.createElement(Q.a.Control,{type:"email",value:m.email,className:p.email&&"is-invalid",onChange:function(e){return d(Object(n.a)(Object(n.a)({},m),{},{email:e.target.value}))}})),o.a.createElement(Q.a.Group,null,o.a.createElement(Q.a.Label,{className:p.username&&"text-danger"},null!==(a=p.username)&&void 0!==a?a:"Username"),o.a.createElement(Q.a.Control,{type:"text",value:m.username,className:p.username&&"is-invalid",onChange:function(e){return d(Object(n.a)(Object(n.a)({},m),{},{username:e.target.value}))}})),o.a.createElement(Q.a.Group,null,o.a.createElement(Q.a.Label,{className:p.password&&"text-danger"},null!==(l=p.password)&&void 0!==l?l:"Password"),o.a.createElement(Q.a.Control,{type:"password",value:m.password,className:p.password&&"is-invalid",onChange:function(e){return d(Object(n.a)(Object(n.a)({},m),{},{password:e.target.value}))}})),o.a.createElement(Q.a.Group,null,o.a.createElement(Q.a.Label,{className:p.confirmPassword&&"text-danger"},null!==(c=p.confirmPassword)&&void 0!==c?c:"Confirm password"),o.a.createElement(Q.a.Control,{type:"password",value:m.confirmPassword,className:p.confirmPassword&&"is-invalid",onChange:function(e){return d(Object(n.a)(Object(n.a)({},m),{},{confirmPassword:e.target.value}))}})),o.a.createElement("div",{className:"text-center"},o.a.createElement(q.a,{variant:"success",type:"submit",disabled:E},E?"loading..":"Register"),o.a.createElement("br",null),o.a.createElement("small",null,"Already have an account? ",o.a.createElement(B.NavHashLink,{to:"/login"},"Login"))))))}o.a.createContext(),o.a.createContext();a(219),a(225),a(206),a(226),a(278);var W=a(21),J=(a(279),a(280),a(391));a(220);function z(e){var t=Object(r.useContext)(M).user;return e.authenticated&&!t?o.a.createElement(W.c,{to:"/login"}):e.guest&&t?o.a.createElement(W.c,{to:"/"}):o.a.createElement(W.d,Object.assign({component:e.component},e))}var K=a(62);a(387),K.b({age:K.a().required(),sex:K.c().required(),height:K.a().required(),heightTens:K.a().required(),weight:K.a().required(),goal:K.c().required(),activityLevel:K.c().required()});function X(e){var t=null,a=null,l=null,c=null,i=Object(r.useState)({age:null,sex:null,height:null,heightTens:null,weight:null,goal:null,activityLevel:null}),u=Object(L.a)(i,2),m=u[0],d=u[1],g=Object(r.useState)({}),b=Object(L.a)(g,2),p=b[0],v=b[1],h=Object(s.useMutation)($,{update:function(t,a){return e.history.push("/")},onError:function(e){return v(e.graphQLErrors[0].extensions.errors)},refetchQueries:[{query:w}]}),f=Object(L.a)(h,2),y=f[0];f[1].loading;return o.a.createElement(S.a,{className:"bg-white py-5 justify-content-center"},o.a.createElement(Q.a,{noValidate:!0,onSubmit:function(e){e.preventDefault(),function(e,n,r,o,i,s,u){var m=30.48*o+2.54*r,d=.453592*i,g="male"===n?10*d+6.25*m-5*e+5:10*d+6.25*m-5*e-161;switch(u){case"Lightly active (moderate exercise but sedentary job)":g=Math.round(1.1*g);break;case"Moderately active (intense exercise but sedentary job)":g=Math.round(1.3*g);break;case"Very active (moderate exercise and active job)":g=Math.round(1.5*g);break;case"Extra active (intense exercise and active job)":g=Math.round(1.7*g)}var b=0,p=0,v=0;switch(s){case"Fat Loss":g<=2e3&&(g=Math.round(.9*g)),g>2e3&&(g=Math.round(.8*g)),b=Math.round(.4*g/4),v=Math.round(.4*g/4),p=Math.round(.2*g/9);break;case"Maintenance":b=Math.round(.45*g/4),v=Math.round(.3*g/4),p=Math.round(.25*g/9);break;case"Get Swole":g+=500,b=Math.round(.45*g/4),v=Math.round(.3*g/4),p=Math.round(.25*g/9)}console.log(p),console.log(b),console.log(v),t=b,a=p,l=v,c=g}(m.age,m.sex,m.height,m.heightTens,m.weight,m.goal,m.activityLevel),y({variables:{carbs:t,fats:a,protein:l,kcal:c}})}},o.a.createElement(Q.a.Group,null,o.a.createElement(Q.a.Label,null,"Age"),o.a.createElement(Q.a.Control,{type:"number",name:"age",value:m.age,onChange:function(e){return d(Object(n.a)(Object(n.a)({},m),{},{age:parseInt(e.target.value)}))},isInvalid:!!p.age}),o.a.createElement(Q.a.Control.Feedback,{type:"invalid"},"Please provide an age.")),o.a.createElement(Q.a.Group,null,o.a.createElement(Q.a.Label,null,"Gender"),o.a.createElement(Q.a.Control,{type:"text",name:"sex",as:"select",value:m.sex,onChange:function(e){return d(Object(n.a)(Object(n.a)({},m),{},{sex:e.target.value}))},isInvalid:!!p.sex},o.a.createElement("option",{value:"",disabled:!0,selected:!0},"Select One"),o.a.createElement("option",null,"male"),o.a.createElement("option",null,"female")),o.a.createElement(Q.a.Control.Feedback,{type:"invalid"},p.sex)),o.a.createElement(Q.a.Group,null,o.a.createElement(Q.a.Label,null,"Weight"),o.a.createElement(Q.a.Control,{type:"number",name:"weight",placeholder:"Pounds",value:m.weight,onChange:function(e){return d(Object(n.a)(Object(n.a)({},m),{},{weight:parseInt(e.target.value)}))},isInvalid:!!p.weight}),o.a.createElement(Q.a.Control.Feedback,{type:"invalid"},p.weight)),o.a.createElement(Q.a.Row,null,o.a.createElement(Q.a.Group,{as:k.a,md:"4"},o.a.createElement(Q.a.Label,null,"Height"),o.a.createElement(Q.a.Control,{type:"number",name:"height",placeholder:"feet",value:m.height,onChange:function(e){return d(Object(n.a)(Object(n.a)({},m),{},{height:parseInt(e.target.value)}))},isInvalid:!!p.height}),o.a.createElement(Q.a.Control.Feedback,{type:"invalid"},p.height)),o.a.createElement(Q.a.Group,{as:k.a,md:"4"},o.a.createElement(Q.a.Label,{style:{color:"white"}},"0"),o.a.createElement(Q.a.Control,{type:"number",name:"heightTens",placeholder:"inches",value:m.heightTens,onChange:function(e){return d(Object(n.a)(Object(n.a)({},m),{},{heightTens:parseInt(e.target.value)}))},isInvalid:!!p.heightTens}),o.a.createElement(Q.a.Control.Feedback,{type:"invalid"},p.heightTens))),o.a.createElement(Q.a.Group,{md:"4"},o.a.createElement(Q.a.Label,null,"Goal"),o.a.createElement(Q.a.Control,{type:"text",name:"goal",as:"select",value:m.goal,onChange:function(e){return d(Object(n.a)(Object(n.a)({},m),{},{goal:e.target.value}))},isInvalid:!!p.goal},o.a.createElement("option",{value:"",disabled:!0,selected:!0},"Select One"),o.a.createElement("option",null,"Fat Loss"),o.a.createElement("option",null,"Maintenance"),o.a.createElement("option",null,"Get Swole")),o.a.createElement(Q.a.Control.Feedback,{type:"invalid"},p.goal)),o.a.createElement(Q.a.Group,{md:"4"},o.a.createElement(Q.a.Label,null,"Activity Level"),o.a.createElement(Q.a.Control,{type:"text",name:"activityLevel",as:"select",value:m.activityLevel,onChange:function(e){return d(Object(n.a)(Object(n.a)({},m),{},{activityLevel:e.target.value}))},isInvalid:!!p.activityLevel},o.a.createElement("option",{value:"",disabled:!0,selected:!0},"Select One"),o.a.createElement("option",null,"Lightly active (moderate exercise but sedentary job)"),o.a.createElement("option",null,"Moderately active (intense exercise but sedentary job)"),o.a.createElement("option",null,"Very active (moderate exercise and active job)"),o.a.createElement("option",null,"Extra active (intense exercise and active job)")),o.a.createElement(Q.a.Control.Feedback,{type:"invalid"},p.activityLevel)),o.a.createElement(q.a,{type:"submit"},"Submit form")),")")}o.a.createContext(),o.a.createContext();var Y=function(){return o.a.createElement(D,null,o.a.createElement(A.BrowserRouter,null,o.a.createElement(J.a,{className:"pt-5"},o.a.createElement(W.g,null,o.a.createElement(z,{exact:!0,path:"/",component:H,authenticated:!0}),o.a.createElement(z,{path:"/register",component:V,guest:!0}),o.a.createElement(z,{path:"/login",component:H,guest:!0}),o.a.createElement(W.d,{path:"/set",component:X})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(375),a(376),a(3);var Z=a(46),ee=a(224),te=Object(s.createHttpLink)({uri:"https://calorie-tracker-backend.herokuapp.com/"}),ae=Object(ee.a)((function(e,t){var a=t.headers,r=localStorage.getItem("token");return{headers:Object(n.a)(Object(n.a)({},a),{},{authentication:r?"Bearer ".concat(r):""})}})),ne=new s.ApolloClient({link:ae.concat(te),cache:new Z.InMemoryCache});c.a.render(o.a.createElement(s.ApolloProvider,{client:ne},o.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[227,1,2]]]);
//# sourceMappingURL=main.65b1c149.chunk.js.map